{"version":3,"sources":["img/morning.png","img/day.png","img/evening.png","img/night.png","img/black.png","js/clock.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","lastSync","syncTimeout","expiryTime","worldState","hasLoaded","CORS_URL","pad","n","toString","length","getWorldState","moment","now","valueOf","request","get","json","err","res","body","window","localStorage","getItem","JSON","parse","setItem","stringify","getTimeFromWorldState","expiryTimeMS","find","element","parseInt","getExpiryTime","getTimeUntilDay","getNextNightTimes","Array","from","x","i","map","calendar","getQuarter","slice","Math","floor","getFormattedTime","ms","total_s","total_m","msToHMS","timeUntilDay","getTimeUntilNextEvent","updateLocale","longDateFormat","LT","LTS","L","l","LL","ll","LLL","lll","LLLL","llll","Clock","props","react_default","a","createElement","className","day_night","time","NextNights","nights","_","index","opacity","key","About","href","App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","backgrounds","morning","day","evening","night","black","state","setState","background","backgroundImage","clearInterval","tickInterval","worldStateInterval","_this2","setInterval","tick","updateWorldState","style","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.dee5b0ec.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/morning.055d4c5c.png\";","module.exports = __webpack_public_path__ + \"static/media/day.ae164e7a.png\";","module.exports = __webpack_public_path__ + \"static/media/evening.3d501728.png\";","module.exports = __webpack_public_path__ + \"static/media/night.3c4f2bfc.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAB4AAAAQ4AQAAAADAqPzuAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAd2KE6QAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAHdElNRQfjARcNNDrZVDwMAAABE0lEQVR42u3BAQ0AAADCoPdPbQ8HFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwKcB+OUAAfzhj/4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDEtMjNUMjE6NTU6NTUrMTE6MDDKhqxaAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTAxLTIzVDAyOjUyOjU4KzExOjAwZHTGPAAAAD10RVh0RGVzY3JpcHRpb24AeyJEUlNBcHBOYW1lIiA6ICIiLCAiRFJTUHJvZmlsZU5hbWUiIDogIkRlc2t0b3AifQAmYXoAAAAWdEVYdFNvZnR3YXJlAEdFRk9SQ0UgU0hBUkW7qGCWAAAAAElFTkSuQmCC\"","import moment from 'moment';\nimport request from 'request';\n\nvar lastSync = 0;\nvar syncTimeout = 60000;\nvar expiryTime = 0;\n\nvar worldState = {};\n\nvar hasLoaded = false;\n\nconst WORLDSTATE_URL = 'http://content.warframe.com/dynamic/worldState.php';\nconst CORS_URL = 'https://cors-anywhere.herokuapp.com/' + WORLDSTATE_URL;\n\nmoment.updateLocale('en', {\n    longDateFormat: {\n        LT: 'HH:mm A',\n        LTS: 'HH:mm:ss A',\n        L: 'MM/DD/YYYY',\n        l: 'M/D/YYYY',\n        LL: 'MMMM Do YYYY',\n        ll: 'MMM D YYYY',\n        LLL: 'MMMM Do YYYY LT',\n        lll: 'MMM D YYYY LT',\n        LLLL: 'dddd, MMMM Do YYYY LT',\n        llll: 'ddd, MMM D YYYY LT'\n    }\n});\n\nfunction pad(n) {\n    if (n.toString().length == 1)\n        return '0' + n.toString();\n    return n;\n}\n\nfunction getWorldState() {\n    if (moment.now().valueOf() - lastSync >= syncTimeout) {\n        lastSync = moment.now().valueOf();\n        request.get(CORS_URL, { json: true }, function (err, res, body) {\n            if (err || typeof body == 'string') {\n                worldState = window.localStorage.getItem('worldState');\n                if (worldState) worldState = JSON.parse(worldState);\n            } else {\n                worldState = body;\n                window.localStorage.setItem('worldState', JSON.stringify(worldState));\n            }\n            hasLoaded = true;\n        });\n    } else return worldState;\n}\n\nfunction getTimeFromWorldState() {\n    var expiryTimeMS = worldState['SyndicateMissions'].find(\n        element => (element['Tag'] === 'CetusSyndicate')\n    )['Expiry']['$date']['$numberLong'];\n    expiryTime = parseInt(expiryTimeMS);\n}\n\n// Get the 'cetus syndicate mission expiry time' from Warframe's servers,\n//  or from a cached version\nfunction getExpiryTime() {\n    if (moment.now().valueOf() >= expiryTime) {\n        expiryTime += 150 * 60 * 1000;\n        getTimeFromWorldState();\n    } else if (moment.now().valueOf() - lastSync >= syncTimeout) {\n        // Resync from server\n        lastSync = moment.now().valueOf();\n        getTimeFromWorldState();\n    }\n    return expiryTime;\n}\n\n// Get the time until the next dawn\nfunction getTimeUntilDay() {\n    return getExpiryTime() - moment.now().valueOf();\n}\n\n// Get the time until the next dawn or dusk\nfunction getTimeUntilNextEvent() {\n    var timeUntilDay = getTimeUntilDay();\n    if (timeUntilDay > (50 * 60 * 1000))\n        return timeUntilDay - (50 * 60 * 1000);\n\n    return timeUntilDay;\n}\n\n// Convert a time to HH:MM:SS format for display\nfunction msToHMS(ms) {\n    var total_s = ms / 1000;\n    var total_m = total_s / 60;\n    var h = pad(Math.floor(total_m / 60));\n    var m = pad(Math.floor(total_m % 60));\n    var s = pad(Math.floor(total_s % 60));\n    return h + ':' + m + ':' + s;\n}\n\nfunction getNthNight(n) {\n    return getExpiryTime() - (50 * 60 * 1000) + (150 * 60 * 1000) * n;\n}\n\n// Return a list of the next n night times\nfunction getNextNightTimes(n) {\n    if (!hasLoaded) return [];\n    return Array.from({ length: n }, (x, i) => i)\n        .map(x => moment(getNthNight(x)).calendar());\n}\n\nfunction isDay(n) {\n    if (!hasLoaded) return true;\n    var timeUntilDay = getTimeUntilDay();\n    if (timeUntilDay > (50 * 60 * 1000))\n        return true;\n    return false;\n}\n\nfunction getQuarter() {\n    if (!hasLoaded) return 4;\n    var slice = Math.floor(15 * (getTimeUntilDay() / (150 * 60 * 1000)));\n    if (slice <= 4) return 3;\n    if (slice <= 7) return 2;\n    if (slice <= 13) return 1;\n    return 0;\n}\n\nfunction getFormattedTime() {\n    if (!hasLoaded) {\n        return '--:--:--';\n    }\n    return msToHMS(getTimeUntilNextEvent());\n}\n\nexport { getFormattedTime, getNextNightTimes, isDay, getQuarter, getWorldState };","import React from 'react';\nimport { getFormattedTime, getNextNightTimes, getQuarter, isDay, getWorldState } from './js/clock.js';\nimport { clearInterval } from 'timers';\nimport morning from './img/morning.png';\nimport day from './img/day.png';\nimport evening from './img/evening.png';\nimport night from './img/night.png';\nimport black from './img/black.png';\n\nclass App extends React.Component {\n\n    constructor(props) {\n        super(props);\n        getWorldState();\n        this.backgrounds = [\n            morning,\n            day,\n            evening,\n            night,\n            black\n        ];\n        this.state = {\n            time: getFormattedTime(),\n            nights: getNextNightTimes(10)\n        };\n    }\n\n    tick() {\n        this.setState({\n            time: getFormattedTime(),\n            nights: getNextNightTimes(10),\n            background: {\n                backgroundImage: 'url(' + this.backgrounds[getQuarter()] + ')'\n            },\n            day_night: isDay() ? 'night' : 'day'\n        });\n    }\n\n    updateWorldState() {\n        getWorldState();\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.tickInterval);\n        clearInterval(this.worldStateInterval);\n    }\n\n    componentDidMount() {\n        this.tickInterval = setInterval(\n            () => this.tick(),\n            500\n        );\n        this.worldStateInterval = setInterval(\n            () => this.updateWorldState(),\n            60 * 1000\n        );\n    }\n\n    render() {\n        return (\n            <div className='container' style={this.state.background}>\n                <Clock time={this.state.time} day_night={this.state.day_night} />\n                <NextNights nights={this.state.nights} />\n                <About />\n            </div>\n        );\n    }\n}\n\nfunction Clock(props) {\n    return (\n        <div className='clock'>\n            <div className='clock-header'>Time until {props.day_night}</div>\n            {props.time}\n        </div>\n    );\n}\n\nfunction NextNights(props) {\n    var opacities = props.nights.map((_, index) => {return {opacity: 0.5 * ((10-index)/10) + 0.5};});\n\n    return (\n        <div className='nights-container'>\n            <div className='nights-header'>\n                Upcoming Nights\n            </div>\n            <div className='nights'>\n                {\n                    props.nights.map(\n                        (time, index) => (\n                            // <div key={index} className='night-time' style={opacities[index]}>{time}</div>\n                            <div key={index} className='night-time'>{time}</div>\n                        )\n                    )\n                }\n            </div>\n        </div>\n    );\n}\n\nfunction About(props) {\n    return (\n        <div className=\"about\">\n\t\t\tMade by <a href=\"https://reddit.com/u/lyneca\">/u/lyneca</a> and <a href=\"https://github.com/lyneca/eidoclock/graphs/contributors\">others</a><br/>\n\t\t\tHosted on <a href=\"https://github.com/lyneca/eidoclock\">GitHub</a><br/>\n        </div>\n    );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}